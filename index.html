<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>WELCOME RAVI VO</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    :root { --bg:#0f1724; --card:#0b1220; --muted:#9aa7b2; --accent:#20c997; --radius:14px; }
    * { box-sizing: border-box; }
    body { margin:0; font-family:Arial, Helvetica, sans-serif; background:var(--bg); color:#e6eef6; display:flex; height:100vh; }
    .sidebar { width:260px; background:#111a2a; padding:12px; display:flex; flex-direction:column; gap:10px; }
    .logo { display:flex; align-items:center; gap:10px; }
    .mark { background:var(--accent); color:#000; font-weight:bold; padding:8px 12px; border-radius:10px; }
    .title { margin:0; font-size:16px; letter-spacing:.5px; }
    .search-box input { width:100%; padding:10px; border-radius:8px; border:1px solid #1d2941; background:#0b1425; color:#e6eef6; outline:none; }
    .menu { display:flex; flex-direction:column; gap:6px; overflow:auto; }
    .menu a { display:block; padding:10px 12px; border-radius:8px; text-decoration:none; color:var(--muted); cursor:pointer; }
    .menu a:hover, .menu a.active { background:var(--accent); color:#000; }
    .content { flex:1; overflow-y:auto; padding:20px; }
    section { display:none; background:var(--card); padding:20px; border-radius:var(--radius); animation: fade .18s ease-in; }
    section.active { display:block; }
    @keyframes fade { from {opacity:0; transform:translateY(4px)} to {opacity:1; transform:none} }
    .profile-pic { height:220px; background:#222; border-radius:12px; display:flex; justify-content:center; align-items:center; margin-bottom:10px; overflow:hidden; }
    .profile-pic img { width:100%; height:100%; object-fit:cover; display:block; }
    .btn { background:#333; color:#fff; border:none; border-radius:10px; padding:10px 14px; margin:6px 6px 6px 0; cursor:pointer; font-size:14px; }
    .btn:hover { background:var(--accent); color:#000; }
    .btn.sm { padding:6px 10px; font-size:12px; border-radius:8px; }
    .preview { background:#0e1525; border:1px dashed #3b4a66; border-radius:12px; padding:12px; margin:12px 0; display:flex; flex-wrap:wrap; gap:12px; min-height:100px; align-items:flex-start; }
    .file-card { background:#1a2236; padding:10px; border-radius:10px; width:140px; display:flex; flex-direction:column; gap:8px; }
    .thumb { background:#0c1220; border-radius:8px; display:flex; align-items:center; justify-content:center; height:90px; overflow:hidden; }
    .thumb img { max-width:100%; max-height:100%; display:block; }
    .pdf-pill { font-size:12px; color:#d1e3ff; }
    .file-name { font-size:12px; color:var(--muted); text-align:center; word-break:break-word; min-height:30px; }
    .actions { display:flex; gap:6px; justify-content:center; flex-wrap:wrap; }
    footer { margin-top:20px; text-align:center; color:var(--muted); }
    .viewer { position:fixed; inset:0; background:rgba(0,0,0,.75); display:none; align-items:center; justify-content:center; padding:24px; z-index:9999; }
    .viewer.show { display:flex; }
    .viewer-box { background:#0b1220; border:1px solid #22304d; border-radius:14px; width:min(1100px,95vw); height:min(85vh,900px); padding:12px; display:flex; flex-direction:column; gap:10px; }
    .viewer-bar { display:flex; justify-content:space-between; align-items:center; }
    .viewer-title { font-size:14px; color:#cfe0f5; overflow:hidden; text-overflow:ellipsis; white-space:nowrap; }
    .viewer-close { background:#2a3552; color:#fff; border:none; border-radius:8px; padding:6px 10px; cursor:pointer; }
    .viewer-close:hover { background:#4b5e8d; }
    .viewer-content { flex:1; background:#0e1525; border:1px solid #203056; border-radius:10px; overflow:hidden; display:flex; align-items:center; justify-content:center; }
    .viewer-content img { max-width:100%; max-height:100%; display:block; }
    .viewer-content iframe { width:100%; height:100%; border:0; background:#fff; }
    @media (max-width: 880px) {
      body { flex-direction:column; height:auto; }
      .sidebar { width:100%; position:sticky; top:0; z-index:10; }
    }
  </style>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</head>
<body>
  <!-- Sidebar -->
  <aside class="sidebar">
    <div class="logo">
      <div class="mark">VO</div>
      <h1 class="title">WELCOME RAVI VO</h1>
    </div>
    <div class="search-box">
      <input type="text" id="searchInput" placeholder="Search section..." />
    </div>
    <nav class="menu" id="menu">
      <a href="#" data-section="about" class="active">About</a>
      <a href="#" data-section="pan">PAN Card</a>
      <a href="#" data-section="vehicle">Vehicle</a>
      <a href="#" data-section="abha">ABHA Health</a>
      <a href="#" data-section="canteen">Canteen</a>
      <a href="#" data-section="dl">Driving License</a>
      <a href="#" data-section="dep">Dependent Card</a>
      <a href="#" data-section="police">Police Card</a>
    </nav>
  </aside>

  <!-- Content -->
  <main class="content">
    <section id="about" class="active">
      <h2>About Me</h2>
      <div class="profile-pic">
        <div id="placeholder">Upload profile image</div>
        <img id="profileImage" style="display:none;" alt="Profile preview">
      </div>
      <label class="btn" for="profileUpload">Upload Profile</label>
      <input id="profileUpload" type="file" accept="image/*" style="display:none;">
      <button id="downloadJPG" class="btn" disabled>⬇ JPG</button>
      <button id="downloadPDF" class="btn" disabled>⬇ PDF</button>
    </section>

    <section id="pan"><h2>PAN Card</h2><label class="btn" for="input-pan">Upload Files</label><input id="input-pan" type="file" multiple accept="image/*,application/pdf" style="display:none;"><div class="preview" id="preview-pan"><div>No files uploaded</div></div></section>
    <section id="vehicle"><h2>Vehicle</h2><label class="btn" for="input-vehicle">Upload Files</label><input id="input-vehicle" type="file" multiple accept="image/*,application/pdf" style="display:none;"><div class="preview" id="preview-vehicle"><div>No files uploaded</div></div></section>
    <section id="abha"><h2>ABHA Health</h2><label class="btn" for="input-abha">Upload Files</label><input id="input-abha" type="file" multiple accept="image/*,application/pdf" style="display:none;"><div class="preview" id="preview-abha"><div>No files uploaded</div></div></section>
    <section id="canteen"><h2>Canteen</h2><label class="btn" for="input-canteen">Upload Files</label><input id="input-canteen" type="file" multiple accept="image/*,application/pdf" style="display:none;"><div class="preview" id="preview-canteen"><div>No files uploaded</div></div></section>
    <section id="dl"><h2>Driving License</h2><label class="btn" for="input-dl">Upload Files</label><input id="input-dl" type="file" multiple accept="image/*,application/pdf" style="display:none;"><div class="preview" id="preview-dl"><div>No files uploaded</div></div></section>
    <section id="dep"><h2>Dependent Card</h2><label class="btn" for="input-dep">Upload Files</label><input id="input-dep" type="file" multiple accept="image/*,application/pdf" style="display:none;"><div class="preview" id="preview-dep"><div>No files uploaded</div></div></section>
    <section id="police"><h2>Police Card</h2><label class="btn" for="input-police">Upload Files</label><input id="input-police" type="file" multiple accept="image/*,application/pdf" style="display:none;"><div class="preview" id="preview-police"><div>No files uploaded</div></div></section>
    <footer>© 2025 RAVI VO</footer>
  </main>

  <!-- Viewer -->
  <div class="viewer" id="viewer">
    <div class="viewer-box">
      <div class="viewer-bar">
        <div class="viewer-title" id="viewerTitle">Preview</div>
        <button class="viewer-close" id="viewerClose">Close ✕</button>
      </div>
      <div class="viewer-content" id="viewerContent"></div>
    </div>
  </div>

<script>
/* --------- NAVIGATION --------- */
const menuLinks=document.querySelectorAll('.menu a');
const sections=document.querySelectorAll('main section');
menuLinks.forEach(link=>{link.addEventListener('click',e=>{e.preventDefault();menuLinks.forEach(l=>l.classList.remove('active'));link.classList.add('active');sections.forEach(sec=>sec.classList.remove('active'));document.getElementById(link.dataset.section).classList.add('active');});});
document.getElementById('searchInput').addEventListener('input',function(){const q=this.value.toLowerCase();menuLinks.forEach(l=>{l.style.display=l.textContent.toLowerCase().includes(q)?'block':'none';});});

/* --------- PROFILE IMAGE --------- */
let profileFile=null;
const profileUpload=document.getElementById('profileUpload'),profileImage=document.getElementById('profileImage'),placeholder=document.getElementById('placeholder'),jpgBtn=document.getElementById('downloadJPG'),pdfBtn=document.getElementById('downloadPDF');
function readFileAsDataURL(file){return new Promise((res,rej)=>{const fr=new FileReader();fr.onload=()=>res(fr.result);fr.onerror=rej;fr.readAsDataURL(file);});}
function saveProfileToStorage(base64,name){localStorage.setItem("profile",{base64,name});}
profileUpload.addEventListener('change',async e=>{const file=e.target.files[0];if(!file)return;const data=await readFileAsDataURL(file);profileImage.src=data;profileImage.style.display='block';placeholder.style.display='none';profileFile=file;jpgBtn.disabled=pdfBtn.disabled=false;localStorage.setItem("profileData",JSON.stringify({name:file.name,data}));});
jpgBtn.addEventListener('click',()=>{if(!profileFile)return;const a=document.createElement('a');a.href=profileImage.src;a.download=profileFile.name;a.click();});
pdfBtn.addEventListener('click',async()=>{if(!profileFile)return;const {jsPDF}=window.jspdf;const img=new Image();img.src=profileImage.src;img.onload=function(){const pdf=new jsPDF({orientation:img.width>img.height?'l':'p',unit:'px',format:[img.width,img.height]});pdf.addImage(img,'JPEG',0,0,img.width,img.height);pdf.save('profile.pdf');};});
(function restoreProfile(){const stored=localStorage.getItem("profileData");if(stored){const {name,data}=JSON.parse(stored);profileImage.src=data;profileImage.style.display='block';placeholder.style.display='none';jpgBtn.disabled=pdfBtn.disabled=false;}})();

/* --------- DOCUMENT SECTIONS --------- */
const SECTION_KEYS=["pan","vehicle","abha","canteen","dl","dep","police"];
function renderCard(container,item){const card=document.createElement('div');card.className='file-card';const thumb=document.createElement('div');thumb.className='thumb';if(item.type.startsWith('image/')){const img=document.createElement('img');img.src=item.data;thumb.appendChild(img);}else{const span=document.createElement('span');span.className='pdf-pill';span.textContent='PDF';thumb.appendChild(span);}const name=document.createElement('div');name.className='file-name';name.textContent=item.name;const actions=document.createElement('div');actions.className='actions';const viewBtn=document.createElement('button');viewBtn.className='btn sm';viewBtn.textContent='View';viewBtn.onclick=()=>openViewer(item);const dlBtn=document.createElement('button');dlBtn.className='btn sm';dlBtn.textContent='Download';dlBtn.onclick=()=>{const a=document.createElement('a');a.href=item.data;a.download=item.name;a.click();};actions.append(viewBtn,dlBtn);card.append(thumb,name,actions);container.appendChild(card);}
function setupSection(key){const input=document.getElementById("input-"+key),preview=document.getElementById("preview-"+key);function save(){localStorage.setItem("files-"+key,JSON.stringify(store[key]));}input.addEventListener('change',async e=>{const files=Array.from(e.target.files);if(!files.length)return;if(preview.textContent.trim()==='No files uploaded')preview.innerHTML='';for(const file of files){const data=await readFileAsDataURL(file);const item={name:file.name,type:file.type,data};store[key].push(item);renderCard(preview,item);}save();input.value="";});const stored=localStorage.getItem("files-"+key);if(stored){store[key]=JSON.parse(stored);if(store[key].length>0)preview.innerHTML='';store[key].forEach(item=>renderCard(preview,item));}}
const store={};SECTION_KEYS.forEach(k=>{store[k]=[];setupSection(k);});

/* --------- VIEWER --------- */
const viewer=document.getElementById('viewer'),viewerContent=document.getElementById('viewerContent'),viewerTitle=document.getElementById('viewerTitle');document.getElementById('viewerClose').onclick=()=>viewer.classList.remove('show');
function openViewer(item){viewerContent.innerHTML='';viewerTitle.textContent=item.name;if(item.type.startsWith('image/')){const img=document.createElement('img');img.src=item.data;viewerContent.appendChild(img);}else{const frame=document.createElement('iframe');frame.src=item.data;viewerContent.appendChild(frame);}viewer.classList.add('show');}
</script>
</body>
</html>
